window.Cr={delayedListeners:true,elm:function(nodeType,attributes,addchilds,appnedTo){var ne,i,l;if(nodeType.length<1||nodeType.indexOf(' ')>-1||nodeType.indexOf('&')>-1||nodeType.indexOf('%')>-1){ne=document.createTextNode(this.unescapeHtml(nodeType.replace(/^\s+/,"")));if(!attributes&&!addchilds&&appnedTo){appnedTo.appendChild(ne);return ne}}else ne=document.createElement(nodeType);if(attributes){if(attributes['class']&&!attributes['className'])ne.className=attributes['class'];if(attributes['style'])ne.style.cssText=attributes['style'];if(attributes.loadevent||attributes.loadevents){var lev=attributes.loadevent||attributes.loadevents;if(typeof(lev[0])=='string')this.registerEventListener(ne,lev[0],lev[1],lev[2]);else if(lev.length)for(i=0,l=lev.length;i<l;i++)this.registerEventListener(ne,lev[i][0],lev[i][1],lev[i][2])}if(attributes.event||attributes.events){var lev=attributes.event||attributes.events;if(this.delayedListeners){if(typeof(lev[0])=='string')this.pendingListenrs.push([ne,[lev]]);else this.pendingListenrs.push([ne,lev])}else{if(typeof(lev[0])=='string')this.registerEventListener(ne,lev[0],lev[1],lev[2]);else if(lev.length)for(i=0,l=lev.length;i<l;i++)this.registerEventListener(ne,lev[i][0],lev[i][1],lev[i][2])}}}for(i in attributes){if(i.substring(0,5)=='event'||i.substring(0,9)=='loadevent'){}else if(i=='checked'||i=='selected'){if(attributes[i])ne.setAttribute(i,i)}else ne.setAttribute(i,attributes[i])}if(addchilds){for(i=0,l=addchilds.length;i<l;i++){if(addchilds[i])ne.appendChild(addchilds[i])}}if(appnedTo){this.insertNode(ne,appnedTo)}return ne},txt:function(textContent){return document.createTextNode(textContent)},ent:function(textContent){return document.createTextNode(this.unescapeHtml(textContent.replace(/^\s+/,"")))},paragraphs:function(textContent){var textPieces=textContent.split("\n");var elmArray=[];for(var i=0,l=textPieces.length;i<l;i++){elmArray.push(Cr.ent(textPieces[i]));elmArray.push(Cr.elm('br'));elmArray.push(Cr.elm('br'))}return elmArray},appendChildElement:function(parentElem,childNode){parentElem.appendChild(childNode);this.addListeners()},insertNode:function(newNode,parentElem,optionalInsertBefore,skipListeners){if(!parentElem)parentElem=document.body;if(optionalInsertBefore&&optionalInsertBefore.parentNode==parentElem){parentElem.insertBefore(newNode,optionalInsertBefore)}else{parentElem.appendChild(newNode)}if(!skipListeners)this.addListeners()},insertNodes:function(newNodes,parentElem,optionalInsertBefore){if(newNodes.nodeType)this.insertNode(newNodes,parentElem,optionalInsertBefore);else{for(var i=0,l=newNodes.length;i<l;i++){this.insertNode(newNodes[i],parentElem,optionalInsertBefore,true)}this.addListeners()}},addListeners:function(){for(i in this.pendingListenrs){for(z in this.pendingListenrs[i][1]){this.registerEventListener(this.pendingListenrs[i][0],this.pendingListenrs[i][1][z][0],this.pendingListenrs[i][1][z][1],this.pendingListenrs[i][1][z][2]?this.pendingListenrs[i][1][z][2]:false)}}this.pendingListenrs=[]},empty:function(node){while(node.lastChild)node.removeChild(node.lastChild)},registerEventListener:function(element,type,func,capture){if(typeof(element.addEventListener)=='function'){element.addEventListener(type,func,capture)}else if(element.attachEvent){if(!element._listeners)element._listeners=[];if(!element._listeners[type])element._listeners[type]=[];var workaroundFunc=function(){func.apply(element,[])};element._listeners[type][func]=workaroundFunc;element.attachEvent('on'+type,workaroundFunc)}},unescapeHtml:function(str){if(str.length<1)return str;var temp=document.createElement("div");temp.innerHTML=str;var result=temp.childNodes[0].nodeValue;temp.removeChild(temp.firstChild);return result},pendingListenrs:[]};